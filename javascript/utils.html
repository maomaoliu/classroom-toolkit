<script>
    function addLoading(containerId, msg) {
        let element = $('#' + containerId);
        element.html('');
        element.append(buildLoadingElement(msg));
    }

    function addError(errorMsg, containerId) {
        let element = $('#' + containerId);
        element.html('');
        element.append(buildErrorMessage(errorMsg));
    }

    function buildLoadingElement(loadingMsg) {
        const ele = $(document.createElement('div')).prop({ class: 'd-flex justify-content-center py-2' });
        ele
            .append($(document.createElement('div')).prop({ class: 'spinner-border' }).attr({ role: 'status' }))
            .append($(document.createElement('span')).prop({ class: 'text-secondary ms-5' }).text(loadingMsg || '请稍后...'));
        return ele;
    }

    function buildErrorMessage(errorMsg) {
        const ele = $(document.createElement('div')).prop({ class: 'text-danger  py-2' });
        ele.append($(document.createElement('span')).text(errorMsg));
        return ele;
    }

    function buildCollapseButton(targetId) {
        let collapseBtn = $(document.createElement('button')).attr({
            'data-bs-toggle': 'collapse',
            'data-bs-target': '#' + targetId,
        }).prop({ class: 'btn btn-outline-secondary collapseBtn' }).text('+');
        collapseBtn.on('click', function () { const btnText = $(this).text(); $(this).text(btnText === '+' ? '-' : '+') });
        return collapseBtn;
    }

    function buildPromptMsgDiv(msg) {
        return $(document.createElement('div')).prop({ class: 'text-center fs-5 text-secondary py-2' }).text(msg);
    }

    function addTooltip(jqueryBtn, tooltipMsg) {
        jqueryBtn.attr({ 
            'data-bs-toggle': 'tooltip',
            'data-bs-placement': 'top',
            title: tooltipMsg
        })
    }
</script>